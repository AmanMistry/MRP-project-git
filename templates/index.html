{% extends "layouts/base.html" %}

{% block title %} Dashboard {% endblock %} 

<!-- Specific CSS goes HERE -->
{% block stylesheets %}
{% endblock stylesheets %}

{% block content %}

    <div class="pcoded-content">
        <div class="pcoded-inner-content">
            <!-- [ breadcrumb ] start -->

            <!-- [ breadcrumb ] end -->
            <div class="main-body">
                <div class="page-wrapper">
                    <!-- [ Main Content ] start -->
                    <div class="row">
                        <!--[ daily sales section ] start-->
                        <div class="col-md-6 col-xl-4">
                            <div class="card daily-sales">
                                <div class="card-block">
                                    <h6 class="mb-4">Currently Logged-In as</h6>
                                    <div class="row d-flex align-items-center">
                                        <div class="col-9">
                                            <img class="" style="width:40px;" src="/static/assets/images/user/user-3.png" alt="activity-user">
                                            <h3 class="f-w-300 d-flex align-items-center m-b-0"><!-- <i class="feather icon-arrow-up text-c-green f-30 m-r-10"></i> -->{{request.user.first_name}}</h3>

                                        </div>

                                        <!-- <div class="col-3 text-right">
                                            <p class="m-b-0">67%</p>
                                        </div> -->
                                    </div>
                                    <!-- <div class="progress m-t-30" style="height: 7px;">
                                        <div class="progress-bar progress-c-theme" role="progressbar" style="width: 50%;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div> -->
                                </div>
                            </div>
                        </div>
                        <!--[ daily sales section ] end-->
                        <!--[ Monthly  sales section ] starts-->
                        <div class="col-md-6 col-xl-4">
                            <div class="card Monthly-sales">
                                <div class="card-block">
                                    <h6 class="mb-4">Monthly Sales</h6>
                                    <div class="row d-flex align-items-center">
                                        <div class="col-9">
                                            <h3 class="f-w-300 d-flex align-items-center  m-b-0"><i class="feather icon-arrow-down text-c-red f-30 m-r-10"></i>$ 2.942.32</h3>
                                        </div>
                                        <div class="col-3 text-right">
                                            <p class="m-b-0">36%</p>
                                        </div>
                                    </div>
                                    <div class="progress m-t-30" style="height: 7px;">
                                        <div class="progress-bar progress-c-theme2" role="progressbar" style="width: 35%;" aria-valuenow="35" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--[ Monthly  sales section ] end-->
                        <!--[ year  sales section ] starts-->
                        <div class="col-md-12 col-xl-4">
                            <div class="card yearly-sales">
                                <div class="card-block">
                                    <h6 class="mb-4">Yearly Sales</h6>
                                    <div class="row d-flex align-items-center">
                                        <div class="col-9">
                                            <h3 class="f-w-300 d-flex align-items-center  m-b-0"><i class="feather icon-arrow-up text-c-green f-30 m-r-10"></i>$ 8.638.32</h3>
                                        </div>
                                        <div class="col-3 text-right">
                                            <p class="m-b-0">80%</p>
                                        </div>
                                    </div>
                                    <div class="progress m-t-30" style="height: 7px;">
                                        <div class="progress-bar progress-c-theme" role="progressbar" style="width: 70%;" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--[ year  sales section ] end-->
                        <!--[ Recent Users ] start-->
                        <div class="col-xl-8 col-md-6">
                            <div class="card Recent-Users">
                                <div class="card-header">
                                    <h5>Graphical View</h5>
                                </div>
                                <div class="card-block px-0 py-3">
                                    <div class="graph-canvas">
                                        <canvas id="myChart" width="10" height="10"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--[ Recent Users ] end-->

                        <!-- [ statistics year chart ] start -->


                        <div class="col-xl-4 col-md-6">
                            <!-- [ your Summary list ] start -->
                            <div class="card card-event">
                                <div class="card-header">
                                    <h5>Your Summary</h5>
                                </div>
                                <div class="card-block">
                                    <div class="row align-items-center justify-content-center">
                                        <table class="table table-hover">
                                        <tbody>
                                            <tr>
                                                <td>Total Kisom Songs</td>
                                                <td><b>{{user_kisom}}</b></td>
                                            </tr>
                                            
                                            <tr>
                                                <td>Total RBT Songs</td>
                                                <td><b>{{user_rbt}}</b></td>
                                            </tr>

                                            <tr>
                                                <td>Total Altafonte Songs</td>
                                                <td><b>{{user_altafonte}}</b></td>
                                            </tr>
                                            
                                            <tr>
                                                <td><b>Total Songs</b></td>
                                                <td><b>{{total_songs}}</b></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    </div>
                                    
                                </div>
                            </div>
                            <!-- [ your Summary list ] ends -->
                            <div class="card">
                                <div class="card-block border-bottom">
                                    <div class="row d-flex align-items-center">
                                        <div class="col-auto">
                                            <i class="feather icon-zap f-30 text-c-green"></i>
                                        </div>
                                        <div class="col">
                                            <h3 class="f-w-300">235</h3>
                                            <span class="d-block text-uppercase">TOTAL IDEAS</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-block">
                                    <div class="row d-flex align-items-center">
                                        <div class="col-auto">
                                            <i class="feather icon-map-pin f-30 text-c-blue"></i>
                                        </div>
                                        <div class="col">
                                            <h3 class="f-w-300">26</h3>
                                            <span class="d-block text-uppercase">TOTAL LOCATIONS</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- [ statistics year chart ] end -->
                        <!--[social-media section] start-->
                        <div class="col-md-12 col-xl-4">
                            <div class="card card-social">
                                <div class="card-block border-bottom">
                                    <div class="row align-items-center justify-content-center">
                                        <div class="col-auto">
                                            <i class="fab fa-facebook-f text-primary f-36"></i>
                                        </div>
                                        <div class="col text-right">
                                            <h3>12,281</h3>
                                            <h5 class="text-c-green mb-0">+7.2% <span class="text-muted">Total Likes</span></h5>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-block">
                                    <div class="row align-items-center justify-content-center card-active">
                                        <div class="col-6">
                                            <h6 class="text-center m-b-10"><span class="text-muted m-r-5">Target:</span>35,098</h6>
                                            <div class="progress">
                                                <div class="progress-bar progress-c-theme" role="progressbar" style="width:60%;height:6px;" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <h6 class="text-center  m-b-10"><span class="text-muted m-r-5">Duration:</span>3,539</h6>
                                            <div class="progress">
                                                <div class="progress-bar progress-c-theme2" role="progressbar" style="width:45%;height:6px;" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-xl-4">
                            <div class="card card-social">
                                <div class="card-block border-bottom">
                                    <div class="row align-items-center justify-content-center">
                                        <div class="col-auto">
                                            <i class="fab fa-twitter text-c-blue f-36"></i>
                                        </div>
                                        <div class="col text-right">
                                            <h3>11,200</h3>
                                            <h5 class="text-c-purple mb-0">+6.2% <span class="text-muted">Total Likes</span></h5>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-block">
                                    <div class="row align-items-center justify-content-center card-active">
                                        <div class="col-6">
                                            <h6 class="text-center m-b-10"><span class="text-muted m-r-5">Target:</span>34,185</h6>
                                            <div class="progress">
                                                <div class="progress-bar progress-c-green" role="progressbar" style="width:40%;height:6px;" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <h6 class="text-center  m-b-10"><span class="text-muted m-r-5">Duration:</span>4,567</h6>
                                            <div class="progress">
                                                <div class="progress-bar progress-c-blue" role="progressbar" style="width:70%;height:6px;" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-xl-4">
                            <div class="card card-social">
                                <div class="card-block border-bottom">
                                    <div class="row align-items-center justify-content-center">
                                        <div class="col-auto">
                                            <i class="fab fa-google-plus-g text-c-red f-36"></i>
                                        </div>
                                        <div class="col text-right">
                                            <h3>10,500</h3>
                                            <h5 class="text-c-blue mb-0">+5.9% <span class="text-muted">Total Likes</span></h5>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-block">
                                    <div class="row align-items-center justify-content-center card-active">
                                        <div class="col-6">
                                            <h6 class="text-center m-b-10"><span class="text-muted m-r-5">Target:</span>25,998</h6>
                                            <div class="progress">
                                                <div class="progress-bar progress-c-theme" role="progressbar" style="width:80%;height:6px;" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"></div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <h6 class="text-center  m-b-10"><span class="text-muted m-r-5">Duration:</span>7,753</h6>
                                            <div class="progress">
                                                <div class="progress-bar progress-c-theme2" role="progressbar" style="width:50%;height:6px;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--[social-media section] end-->
                        <!-- [ statistical view list ] starts-->
                        <div class="col-xl-12 col-md-6">
                            <div class="card user-list">
                                <div class="card-header">
                                    <h5>Statistical View</h5>
                                </div>
                                <div class="card-block">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>Month Year</th>
                                                <th>Total RBT</th>
                                                <th>Total Kisom</th>
                                                <th>Total International</th>
                                                <th>Total Artista</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for item in record_all %}
                                                <tr>
                                                    <td>{{item.month_year}}</td>
                                                    <td>{{item.rbt_val}}</td>
                                                    <td>{{item.kisom_val}}</td>
                                                    <td>{{item.altafonte_aoa}}</td>
                                                    <td>{{item.total_artista}}</td>
                                                </tr>
                                            {% endfor %}

                                            <tr>
                                                <td><b>Total</b></td>
                                                <td><b>{{total_rbt.rbt_val__sum}}</b></td>
                                                <td><b>{{total_kisom.kisom_val__sum}}</b></td>
                                                <td><b>{{total_altafonte_aoa.altafonte_aoa__sum}}</b></td>
                                                <td><b>{{total_artista.total_artista__sum}}</b></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <!-- [ statistical view list ] end--> 

                        <!-- [ view documents list ] starts-->
                        <div class="col-xl-6 col-md-6">
                            <div class="card user-list">
                                <div class="card-header">
                                    <h5>Your Documents</h5>
                                </div>
                                <div class="card-block">
                                {% if document|length == 0 %}
                                    <h5>No Documents have been uploaded or No Documents have been approved by Admin</h5>
                                {% else %}
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Documents</th>
                                                
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for item in document %}
                                                <tr>
                                                    <td>{{request.user.first_name}}</td>
                                                    <td><a href="{{item.document.url}}">{{item.document}}</a></td>
                                                </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                {% endif %}
                                    
                                </div>
                                
                            </div>
                        </div>
                        <!-- [ view documents list ] end-->

                        <!-- [ top 10 service list ] starts-->
                        <div class="col-xl-6 col-md-6">
                            <div class="card user-list">
                                <div class="card-header">
                                    <h5>Your Top 10 Services</h5>
                                </div>
                                <div class="card-block">
                                {% if document|length == 0 %}
                                    <h5>No Documents have been uploaded or No Documents have been approved by Admin</h5>
                                {% else %}
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>Service Name</th>
                                                <th>Amount</th>
                                                
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for item in top_10_service %}
                                                <tr>
                                                    <td>{{item.service_id}}</td>
                                                    <td>{{item.dcount}} $ </td>
                                                </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                {% endif %}
                                    
                                </div>
                                
                            </div>
                        </div>
                        <!-- [ top 10 service list ] end-->

                        <!-- [ ringtone code list ] starts-->
                        <div class="col-xl-6 col-md-6">
                            <div class="card user-list">
                                <div class="card-header">
                                    <h5>Ringtone Codes of your Songs</h5>
                                </div>
                                <div class="card-block">
                                {% if ringtone_codes|length == 0 %}
                                    <h5>No Ringtone Codes have been uploaded or No Ringtone have been approved by Admin</h5>
                                {% else %}
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>Song Name</th>
                                                <th>Promo Code</th>
                                                <th>Created At</th>    
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for item in ringtone_codes %}
                                                <tr>
                                                    <td>{{item.title}}</td>
                                                    <td>{{item.promo_code}}</td>
                                                    <td>{{item.created_at}}</td>
                                                </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                {% endif %}
                                    
                                </div>
                                
                            </div>
                        </div>
                        <!-- [ ringtone code list ] end-->

                        
                    </div>
                    <!-- [ Main Content ] end -->
                </div>
            </div>
        </div>
    </div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
<script>
$(document).ready(function(){
    var ctx = document.getElementById('myChart').getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'bar',
        data: 
            {
                labels: [{% for item in record_new_6 %}
                    '{{item.month_year}}',
                    {% endfor %}],  //JAN 2021, FEB 2021 etc
                
                datasets: 
                [
                    {
                        label: 'TOTAL RBT', //name of column kisom, rbt, etc
                        data: [{% for item in record_new_6 %}
                            {{item.rbt_val}},
                        {% endfor %}],
                        backgroundColor: [
                            {% for item in record_new_6 %}
                                'rgba(255, 99, 132, 0.2)',
                            {% endfor %}
                        ],
                        borderColor: [
                            {% for item in record_new_6 %}
                                'rgba(255, 99, 132, 1)',
                            {% endfor %}
                        ],
                        borderWidth: 1
                    },
                    
                    {
                        label: 'TOTAL KISOM', //name of column kisom, rbt, etc
                        data: [{% for item in record_new_6 %}
                            {{item.kisom_val}},
                        {% endfor %}],
                        backgroundColor: [
                            {% for item in record_new_6 %}
                                'rgba(54, 162, 235, 0.2)',
                            {% endfor %}
                        ],
                        borderColor: [
                            {% for item in record_new_6 %}
                                'rgba(54, 162, 235, 1)',
                            {% endfor %}
                        ],
                        borderWidth: 1
                    },

                    {
                        label: 'TOTAL INTERNATIONAL', //name of column kisom, rbt, etc
                        data: [{% for item in record_new_6 %}
                            {{item.altafonte_aoa}},
                        {% endfor %}],
                        backgroundColor: [
                            {% for item in record_new_6 %}
                                'rgba(153, 102, 255, 0.2)',
                            {% endfor %}
                        ],
                        borderColor: [
                            {% for item in record_new_6 %}
                                'rgba(153, 102, 255, 1)',
                            {% endfor %}
                        ],
                        borderWidth: 1    
                    },

                    {
                        label: 'TOTAL ARTISTA', //name of column kisom, rbt, etc
                        data: [{% for item in record_new_6 %}
                            {{item.total_artista}},
                        {% endfor %}],
                        backgroundColor: [
                            {% for item in record_new_6 %}
                                'rgba(255, 206, 86, 0.2)',
                            {% endfor %}
                        ],
                        borderColor: [
                            {% for item in record_new_6 %}
                                'rgba(255, 206, 86, 1)',
                            {% endfor %}
                        ],
                        borderWidth: 1    
                    }
                ]
            },
        options: 
        {
            responsive: true,
            maintainAspectRatio: false,
            barValueSpacing:20,
            scales: 
            {
                y: 
                {
                    beginAtZero: true
                }
            }
        }
    });
});

var ctx = $('#myChart');

ctx.height(538);
</script>
{% endblock javascripts %}
